<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bazar-Sodai</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="/" class="logo" style="text-decoration: none; color: inherit;">Bazar-Sodai</a>
                <button id="collapse-btn" class="collapse-btn">></button>
            </div>
            <ul class="nav-links">
                <li>
                    <a href="/" data-key="settings.nav.home">Home</a>
                </li>
                <li class="dropdown-container">
                    <div class="dropdown-header">
                        <a href="/category/homeservice" data-key="settings.nav.homeservice">Homeservice</a>
                        <span class="arrow">▼</span>
                    </div>
                    <div class="dropdown-content" id="homeservice-dropdown">
                        <!-- Populated by JS -->
                    </div>
                </li>
                <li class="dropdown-container">
                    <div class="dropdown-header">
                        <a href="/category/grocery" data-key="settings.nav.grocery">Grocery Item</a>
                        <span class="arrow">▼</span>
                    </div>
                    <div class="dropdown-content" id="grocery-dropdown">
                        <!-- Populated by JS -->
                    </div>
                </li>
            </ul>

            <div class="sidebar-footer">
                <select id="lang-switch">
                    <option value="en">English</option>
                    <option value="bn">বাংলা</option>
                </select>
            </div>
        </aside>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Top Bar for Cart and Mobile Toggle -->
            <header class="top-bar">
                <div class="mobile-toggle">☰</div>
                <div class="ad-section">
                    <marquee behavior="scroll" direction="left" scrollamount="5">আমাদের যে কোন পণ্য অর্ডার করতে কল বা
                        WhatsApp করুন: +8801321208940 | হট লাইন: 09642-922922</marquee>
                </div>
                <div class="cart-icon" onclick="toggleCart()">
                    <span data-key="settings.nav.cart">Cart</span> (<span id="cart-count">0</span>)
                </div>
            </header>

            <div class="category-quick-links">
                <a href="/category/homeservice" class="quick-btn">Homeservice</a>
                <a href="/category/grocery" class="quick-btn">Grocery</a>
            </div>

            <!-- Search Section -->
            <div class="search-container">
                <input type="text" id="product-search" placeholder="Search products..." autocomplete="off">
                <div id="live-search-results" class="live-search-results">
                    <div id="search-categories" class="search-categories"></div>
                    <div id="search-products" class="search-products-grid"></div>
                </div>
            </div>

            <main>
                {% block content %}{% endblock %}
            </main>

            <!-- Floating Back Button -->
            <button onclick="window.history.back()" class="back-btn floating-back" title="Go Back">
                <span>⬅</span> <span data-key="settings.nav.back">Back</span>
            </button>
        </div>
    </div>

    <div id="cart-sidebar" class="cart-sidebar">
        <div class="cart-header">
            <h2 data-key="settings.nav.cart">Your Cart</h2>
            <button onclick="toggleCart()" class="close-cart">&times;</button>
        </div>
        <div id="cart-items">
            <!-- Cart items here -->
        </div>
        <div class="cart-footer">
            <div class="total">
                <span data-key="settings.cart_labels.total">Total</span>: ৳<span id="cart-total">0</span>
            </div>
            <button class="checkout-btn" data-key="settings.cart_labels.checkout">Checkout</button>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Checkout</h2>
            <form id="checkout-form" onsubmit="submitOrder(event)">
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" required>
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" required>
                </div>
                <div class="form-group">
                    <label for="email">Email (Optional)</label>
                    <input type="email" id="email">
                </div>
                <div class="form-group">
                    <label for="address">Address</label>
                    <textarea id="address" required></textarea>
                </div>
                <div class="form-group">
                    <label for="message">Message (Optional)</label>
                    <textarea id="message"></textarea>
                </div>
                <button type="submit" class="submit-btn">Place Order</button>
            </form>
        </div>
    </div>

    <!-- Product Details Modal -->
    <div id="product-modal" class="modal">
        <div class="modal-content product-modal-content">
            <span class="close-modal" id="close-product-modal">&times;</span>
            <div class="product-details-container">
                <div class="modal-image-section modal-image">
                    <div class="img-placeholder-large" id="modal-img-placeholder"></div>
                </div>
                <div class="modal-info-section">
                    <span class="brand-badge" id="modal-brand">Brand</span>
                    <h2 id="modal-title">Product Title</h2>
                    <div class="modal-rating">
                        <span class="stars">⭐⭐⭐⭐⭐</span>
                        <span class="review-count">(<span id="modal-reviews">0</span> reviews)</span>
                    </div>
                    <div class="modal-price-section">
                        <span class="current-price">৳<span id="modal-price">0</span></span>
                        <span class="original-price">৳<span id="modal-original-price">0</span></span>
                        <span class="discount-badge" id="modal-discount">0% OFF</span>
                    </div>
                    <p class="modal-description" id="modal-description">Description goes here...</p>

                    <div class="modal-meta">
                        <div class="meta-item">
                            <strong>Delivery:</strong> <span id="modal-delivery">2 Days</span>
                        </div>
                    </div>

                    <div class="quantity-control">
                        <button class="qty-btn" onclick="updateModalQuantity(-1)">-</button>
                        <span id="modal-quantity">1</span>
                        <button class="qty-btn" onclick="updateModalQuantity(1)">+</button>
                    </div>

                    <button class="add-to-cart-btn modal-add-btn" id="modal-add-btn">
                        Add to Cart - ৳<span id="modal-total-price">0</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/script.js"></script>
</body>

</html>